/**
 * PaulZi Form
 * @see https://github.com/paulzi/paulzi-form
 * @license MIT (https://github.com/paulzi/paulzi-form/blob/master/LICENSE)
 * @version 3.0.4
 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(c){return a.FormExtraEvents=b(c)}):"object"==typeof exports?module.exports=b(require("jquery")):a.FormExtraEvents=b(a.jQuery)}(this,function(a){"use strict";var b=a(window),c=a.extend({catchDefault:!1,dataAttribute:"catchDownload",param:"_requestId",interval:100,timeout:6e4},window.FormExtraEvents||{}),d=function(d){if(!d.isDefaultPrevented()){var e=a(d.target),f=a.Event("submitlast");if(e.trigger(f),f.isDefaultPrevented())d.preventDefault();else{var g,h,i,j,k,l=function(a){e.trigger({type:a,transport:"default"})},m=function(){g&&clearTimeout(g),g!==!1&&(g=!1,k&&(k.remove(),k=null),b.off("beforeunload",m),l("submitstart"))},n=function(){b.off("unload",n),m(),h&&clearInterval(h),i&&clearTimeout(i),j&&(document.cookie=o.param+j+"=; expires="+new Date(0).toUTCString()+"; path=/"),l("submitend")};l("submitbefore");var o=e.data(c.dataAttribute)||{};"object"!=typeof o&&(o={catchDefault:!!o}),o=a.extend({},c,o),o.catchDefault&&(j=a.now(),k=a("<input>").attr({type:"hidden",name:o.param,value:j}).appendTo(e),h=setInterval(function(){document.cookie.indexOf(j+"=1")!==-1&&n()},o.interval),o.timeout&&(i=setTimeout(function(){n()},o.timeout))),g=setTimeout(m,100),b.one("beforeunload",m),b.one("unload",n)}}};return a(document).on("submit",function(a){if(!a.isDefaultPrevented()){var c="submit.last";b.off(c),b.one(c,d)}}),c}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(a.jQuery)}(this,function(a){"use strict";var b="formAssociationPolyfill",c='input[type="submit"],input[type="image"],button[type="submit"]';a(document).on("click","input,button",function(){document.activeElement&&document.activeElement!==document.body||a(this).focus()});var d=function(){this.style.display="none"},e=function(){var c=a(document.body),e=a("<form>").prop("id",b).each(d).appendTo(c),f=a('<input form="'+b+'">').each(d).appendTo(c),g=f.prop("form")===e[0];return e.add(f).remove(),g},f=function(b){var c=a(this).attr("form");if(c){var d=a(this).closest("form");d.length&&d[0].id===c||(b.preventDefault(),d.one("submit",function(a){a.preventDefault(),a.stopPropagation()}),a("form#"+c).trigger("submit"))}},g=function(){var c,e,f,g=this,h=[];for(c=0;c<g.elements.length;c++)e=g.elements[c],f=a(e).attr("form"),f&&f!==g.id&&!e.disabled&&(e.disabled=!0,h.push(e));var i=a();if(g.id){var j=function(b,c){var e=a("<div>").each(d);return e[c](b),i=i.add(e),e},k=j(g,"prependTo");a('[form="'+g.id+'"], form[id="'+g.id+'"]').each(function(){if(this===g)k=j(g,"appendTo");else if(a.inArray(g.elements,this)===-1&&!this.disabled){var c=this.cloneNode(!0);a(this).replaceWith(c).prop(b,c).appendTo(k)}})}g[b]=[h,i]},h=function(){var c=this[b];if(c){var d;for(d=0;d<c[0].length;d++)c[0][d].disabled=!1;c[1].children().each(function(){a(this[b]).replaceWith(this),this[b]=null}).end().remove()}};e()||(a(document).on("click",c,f),a(document).on("submitbefore","form",g),a(document).on("submitstart","form",h));var i=b+"Submission",j=["action","enctype","method","target"],k=function(){var b=a("<input>")[0];return!!("formAction"in b)},l=function(){var b=a(this),d=a(document.activeElement).filter(c);if(d.length||a.each(this.elements,function(b,e){e=a(e).filter(c),!d.length&&e.length&&(d=e)}),d.length){var e={},f={};a.each(j,function(a,c){e[c]=d.attr("form"+c),f[c]=b.attr(c)}),b.prop(i,f),b.attr(e)}},m=function(){var b=a(this).prop(i);b&&a(this).attr(b)};k()||(a(document).on("submitbefore","form",l),a(document).on("submitstart","form",m))}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(a.jQuery)}(this,function(a){"use strict";var b="jqueryIframeAjax",c="position: absolute; z-index: -1000; width: 0; height: 0; overflow: hidden; border: none;",d=function(b){for(var c,d=[],e=b.split("&"),f=function(a){return decodeURIComponent(a).replace("+"," ")},g=0;g<e.length;g++)c=e[g].split("="),""!==c[0]&&d.push(a.map(c,f));return d};a.ajaxTransport("+*",function(e){if(e.iframe){var f;return{send:function(g,h){var i,j=b+"-"+a.now();f=a('<iframe name="'+j+'" style="'+c+'">');var k;e.form?k=a(e.form):(k=a("<form>").attr("style",c).appendTo(document.body),e.files&&k.attr("enctype","multipart/form-data"));var l=k[0],m={action:l.action,method:l.method,target:l.target};k.prop({action:e.url,method:e.method,target:j});var n=[],o=e.data||"";for(o&&"string"!=typeof o&&(o=a.param(o,e.traditional)),o=a.merge([["X-Requested-With","IFrame"]],d(o)),i=0;i<o.length;i++)n.push(a('<input type="hidden">').attr("name",o[i][0]).val(o[i][1]).appendTo(k));var p=[];if(e.files){var q,r;for(i=0;i<e.files.length;i++)q=a(e.files[i]),r=q.clone().data(b,q),p.push(r),q.replaceWith(r),q.appendTo(k)}f.one("load",function(){f.one("load",function(){try{var b=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,c=b.body?b.body:b.documentElement,d=a(c).find("textarea[data-status]"),e=parseInt(d.data("status")||200,10),g=d.data("statusText")||"OK",i=d.data("contentType"),j=d.data("headers")||null;if(j&&"object"==typeof j){var k=[];a.each(j,function(a,b){k.push(a+": "+b)}),j=k.join("\r\n")}i&&(i="Content-Type: "+i,j=j?i+"\r\n"+j:i);var l;l=d.size()?{text:d.val()}:{html:c.innerHTML,text:c.textContent||c.innerText},f.remove(),h(e,g,l,j)}catch(m){f.remove(),h(0,"IFrame error")}});var c=function(){var a;for(l.submit(),k.prop(m),a=0;a<p.length;a++)p[a].replaceWith(p[a].data(b));if(e.form)for(a=0;a<n.length;a++)n[a].remove();else k.remove();e.iframeOnSubmit&&e.iframeOnSubmit()};e.form?setTimeout(c,1):c()}),a(document.body).append(f)},abort:function(){f.off("load"),f.remove()}}}})}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(c){return a.PaulZiForm=b(c)}):"object"==typeof module&&module.exports?module.exports=b(require("jquery")):a.PaulZiForm=b(a.jQuery)}(this,function(a){"use strict";var b=window,c=document,d=a(c),e=function(b){var c=a();return b.icon&&(c=c.add(a("<i>").addClass(b.icon))),b.text&&(c=c.add(a("<span>").text(b.text))),c},f=a.extend(!0,{classes:{formLoading:"form-loading",btnLoading:"btn-loading"},attributes:{via:"data-via",lock:"data-lock",submitEmpty:"data-submit-empty",to:"data-insert-to",context:"data-insert-context",mode:"data-insert-mode",params:"data-insert-params",loadingText:"data-loading-text",loadingIcon:"data-loading-icon"},defaults:{lock:!0,submitEmpty:!0,to:"output",context:"this",mode:"html",params:"true",skipOnError:!1},defaultTemplate:e,buttonLoadingTemplate:e,buttonLoadingForce:!1},b.PaulZiForm||{}),g=function(b){var d='input[type="submit"],input[type="image"],button[type="submit"],:not(button[type])',e=a(c.activeElement).filter(d);return a.each(b.elements,function(b,c){c=a(c).filter(d),!e.length&&c.length&&(e=c)}),e},h="paulziForm",i="."+h,j="submitlast",k="submitbefore",l="submitstart",m="submitend",n=f.classes,o=f.attributes,p=f.defaults,q=h+"NoEmpty",r=function(b){var c=a(b.target),d=[];a.each(c.prop("elements"),function(b,e){if(""===e.value&&!e.disabled&&"submit"!==e.type){var f=a(e).closest("["+o.submitEmpty+"]").attr(o.submitEmpty)||c.attr(o.submitEmpty);f=f?a.inArray(f,["1","true"])!==-1:p.submitEmpty,f||(e.disabled=!0,d.push(e))}}),c.data(q,d)},s=function(b){var c=a(b.target).data(q);c&&a.each(c,function(a,b){b.disabled=!1})};d.on(k+i,r),d.on(l+i,s);var t=h+"Lock",u=function(b){var c=a(b.target);if(c.data(t)){var d=c.attr(o.lock);("undefined"!=typeof d?a.inArray(d,["1","true"])!==-1:p.lock)&&b.preventDefault()}},v=function(b){a(b.target).data(t,!0)},w=function(b){a(b.target).data(t,!1)};d.on(j+i,u),d.on(k+i,v),d.on(m+i,w);var x=h+"Scenario",y=function(b){var c=a(b.target),d=[];a.each(c.prop("elements"),function(c,e){var f=a(e).closest("form, ["+o.via+"]").not("form").attr(o.via);f&&"all"!==f&&f!==b.transport&&!e.disabled&&"submit"!==e.type&&(e.disabled=!0,d.push(e))}),c.data(x,d)},z=function(b){var c=a(b.target).data(x);c&&a.each(c,function(a,b){b.disabled=!1})};d.on(k+i,y),d.on(l+i,z);var A=h+"Catch",B=function(c){var d=a(c.target),e=g(c.target),f=b.FormExtraEvents.dataAttribute,h=e.data(f);"undefined"!=typeof h&&(d.data(A,d.data(f)||{}),d.data(f,h))},C=function(c){var d=a(c.target),e=b.FormExtraEvents.dataAttribute,f=d.data(A);"undefined"!=typeof f&&(d.data(e,f||{}),d.removeData(A))};d.on(k+i,B),d.on(l+i,C);var D=function(b){var c=a(this),d=c.offset();c.data(h+"X",Math.round(b.pageX-d.left)).data(h+"Y",Math.round(b.pageY-d.top))},E=function(c){var d=a(c.target),e=g(c.target),f=d.attr(o.via),i=e.attr(o.via);if(!c.isDefaultPrevented()&&("ajax"===f&&!i||"ajax"===i)){c.preventDefault();var j=a.Event("submitajax");if(d.trigger(j),!j.isDefaultPrevented()){var n=function(a,b){d.trigger({type:a,transport:"ajax"},b)};n(k);var p={url:e.attr("formaction")||d.attr("action"),method:e.attr("formmethod")||d.attr("method")||"GET",contentType:e.attr("formenctype")||d.attr("enctype"),xhr:function(){var b=a.ajaxSettings.xhr(),c=function(b){return function(c){var e=a.Event(c,{type:b,loaded:c.loaded,total:c.total,lengthComputable:c.lengthComputable});d.trigger(e)}};return b.addEventListener&&b.addEventListener("progress",c("downloadprogress")),b.upload&&b.upload.addEventListener&&(b.upload.addEventListener("progress",c("uploadprogress")),b.upload.addEventListener("loadend",c("uploadend"))),b}},q=[],r=e.attr("name");if(r){var s;s=e.data(h+"X"),"undefined"!=typeof s?q.push({name:r+".x",value:s}):q.push({name:r,value:e.val()}),s=e.data(h+"Y"),"undefined"!=typeof s&&q.push({name:r+".y",value:s})}if("multipart/form-data"===p.contentType)if("FormData"in b){var t=new FormData(d[0]);a.each(q,function(a,b){t.append(b.name,b.value)}),p.data=t,p.processData=!1,p.contentType=!1}else p.data=q,p.form=d[0],p.iframe=!0,p.iframeOnSubmit=n(l);else p.data=a.merge(d.serializeArray(),q);a.ajax(p).done(function(a,b,c){n("submitdone",[a,c])}).fail(function(a,b,c){n("submitfail",[a.responseText,a,c])}).always(function(){var a,b,c;"object"==typeof arguments[2]?(a=arguments[0],b=arguments[2]):(a=arguments[0].responseText,b=arguments[0],c=arguments[2]),n(m,[a,b,c])}),p.iframe||n(l)}}};d.on("click"+i,'input[type="image"]',D),d.on(j+i,E);var F=function(b,e,f,g){if("ajax"===b.transport){var h=f.getResponseHeader("X-Redirect");h&&(c.location.href=h,b.preventDefault());var i=f.getResponseHeader("Content-Type");if(!b.isDefaultPrevented()&&(null===i||/^text\/html(;|$)/.test(i))){var j=a(b.target),k=a(a.parseHTML(e,!0));g&&p.skipOnError||k.each(function(){var b=a(this),c=b.attr(o.to)||j.attr(o.to)||p.to,e=b.attr(o.context)||j.attr(o.context)||p.context,f=b.attr(o.mode)||j.attr(o.mode)||p.mode,g=b.attr(o.params)||j.attr(o.params)||p.params;e&&c&&(e="document"===e?d:"this"===e?j:j.closest(e),c="context"===c?e:e.find(c)),c&&c.length&&c[f]&&(j.trigger("contentprepare",[k,f,c]),"true"===g?c[f](this):"false"===g?c[f]():c[f](g,this),j.trigger("contentinit",[k,f,c]))})}}};o.via!==!1&&d.on(m+i,F);var G=function(b){var c=a(b.target).addClass(n.formLoading),d=g(b.target).addClass(n.btnLoading),e={form:c[0],btn:d[0],text:d.attr(o.loadingText),icon:d.attr(o.loadingIcon)};if(c.data(h+"Btn",d),e.text||e.icon||f.buttonLoadingForce){var i=f.buttonLoadingTemplate(e);i&&(d.data(h+"Old",d.contents()),d.html(i))}},H=function(b){var c=a(b.target).removeClass(n.formLoading),d=c.data(h+"Btn");if(d){var e=d.data(h+"Old");d.html(e),d.removeClass(n.btnLoading)}};return d.on(k+i,G),d.on(m+i,H),f});